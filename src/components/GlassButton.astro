---
interface Props {
    href?: string;
    label: string;
    class?: string;
}

const { href = "#", label, class: className = "" } = Astro.props;
---

<a href={href} class:list={["glass-button", className]}>
    <span class="glass-button-inner"></span>
    <span class="glass-button-label">{label}</span>
</a>

<style>
    .glass-button {
        /* Configuración base */
        --glass-radius: 9999px;

        /* 1. COLOR EXACTO DEL ORIGINAL: Gris azulado muy transparente */
        --glass-bg: hsla(240, 8%, 68%, 0.082);

        position: relative;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        text-decoration: none;
        cursor: pointer;
        padding: 0.15rem 2.4rem;

        /* GPU acceleration */
        transform: translateZ(0);
        will-change: auto;
    }

    /* --- 1. EL TEXTO --- */
    .glass-button-label {
        position: relative;
        z-index: 10;
        color: #101214;
        font-family: var(--font, system-ui, sans-serif);
        font-size: 20px;
        font-weight: 500;
        letter-spacing: 0.02em;
        pointer-events: none;
    }

    /* --- 2. LA CÁPSULA (Estilo Visual Actualizado) --- */
    .glass-button-inner {
        position: absolute;
        inset: 0;
        border-radius: var(--glass-radius);
        background-color: var(--glass-bg);

        /* 2. EL FILTRO: Esto es clave. Saturate 200% hace que el fondo 'vibre' */
        backdrop-filter: blur(0.4rem) saturate(200%);
        -webkit-backdrop-filter: blur(0.4rem) saturate(200%);

        /* 3. LA SOMBRA INTERNA:
           El original usa sombra OSCURA (rgba 16,18,20), no blanca.
           Esto le da volumen y densidad al cristal. */
        box-shadow:
            inset 0 0 0.4rem 0.2rem rgba(16, 18, 20, 0.4),
            /* Sombra interna densa */ 0 0.8rem 0.8rem rgba(84, 77, 86, 0.05); /* Sombra caída suave */

        /* Tu animación original de entrada */
        animation: jelly-shrink 0.6s ease forwards;
    }

    /* --- EFECTO HOVER (Manteniendo tu animación) --- */
    .glass-button:hover .glass-button-inner {
        animation: smooth-expand 0.4s ease forwards;

        /* Ajustamos la sombra del hover para que coincida con el estilo oscuro */
        box-shadow:
            inset 0 0 0.4rem 0.2rem rgba(16, 18, 20, 0.2),
            /* Se aclara un poco al expandirse */ 0 0.8rem 0.8rem
                rgba(84, 77, 86, 0.1);
    }

    /* --- TUS ANIMACIONES (Sin cambios en la física) --- */
    /* Solo he quitado los box-shadow antiguos de dentro de los keyframes para que no parpadee blanco */

    @keyframes smooth-expand {
        0% {
            transform: perspective(200px) scale(1, 1) rotateX(0deg)
                translateZ(0);
        }
        50% {
            transform: perspective(200px) scale(1.04, 1.2) rotateX(3deg)
                translateZ(8px);
        }
        100% {
            transform: perspective(200px) scale(1.03, 1.15) rotateX(2deg)
                translateZ(5px);
        }
    }

    @keyframes jelly-shrink {
        0% {
            transform: scale(1.03, 1.15);
        }
        25% {
            transform: scale(1.05, 0.9);
        }
        50% {
            transform: scale(0.98, 1.05);
        }
        75% {
            transform: scale(1.01, 0.98);
        }
        100% {
            transform: scale(1, 1);
        }
    }

    /* --- 3. EL BORDE (Fixed Style) --- */
    .glass-button-inner::after {
        content: "";
        position: absolute;
        inset: 0;
        border-radius: inherit;
        padding: 1px;
        pointer-events: none;

        /* 4. EL GRADIENTE ORIGINAL */
        /* Diagonal, brillante en esquinas opuestas, transparente en el centro */
        background: linear-gradient(
            -45deg,
            rgba(255, 255, 255, 0.4) 0%,
            rgba(255, 255, 255, 0) 40%,
            rgba(255, 255, 255, 0) 60%,
            rgba(255, 255, 255, 0.4) 100%
        );

        /* Máscara técnica */
        -webkit-mask:
            linear-gradient(#fff 0 0) content-box,
            linear-gradient(#fff 0 0);
        mask:
            linear-gradient(#fff 0 0) content-box,
            linear-gradient(#fff 0 0);
        -webkit-mask-composite: xor;
        mask-composite: exclude;
    }
</style>
