---
// c-selected - Featured projects section
interface Project {
  title: string;
  description: string;
  url: string;
  isExternal?: boolean;
}

interface Props {
  projects?: Project[];
}

const defaultProjects: Project[] = [
  {
    title: "StringTune",
    description: "StringTune is a modular JS library for quick, flexible use of animations and hooks â€“ combine, tweak, or craft your own effects.",
    url: "https://string-tune.fiddle.digital",
    isExternal: true
  },
  {
    title: "Kaleida",
    description: "Kaleida is an award winning global experiential company with a unique specialism in holographic and immersive experiences.",
    url: "https://wearekaleida.com",
    isExternal: true
  },
  {
    title: "ThermoKonnect",
    description: "ThermoKonnect specializes in crafting high-quality terminal junction splices for seamless electrical connections.",
    url: "/work/thermo-konnect",
    isExternal: false
  }
];

const { projects = defaultProjects } = Astro.props;
---

<section class="c-selected">
  {projects.map((project, index) => (
    <div class="featured" style={`--top:${index}1;`}>
      <!-- Background placeholder -->
      <span class="project-cover"></span>
      
      <div class="-w">
        <a 
          href={project.url} 
          rel={project.isExternal ? "noopener noreferrer" : undefined}
          target={project.isExternal ? "_blank" : undefined}
        >
          <!-- Video placeholder -->
          <div class="video-wrap -fit">
            <div class="video-placeholder"></div>
          </div>
          <span class="-h6">{project.title}</span>
        </a>
        <p class="description -m">{project.description}</p>
      </div>
    </div>
  ))}
</section>

<style>
  .c-selected {
    background-color: var(--c-berry);
    position: relative;
  }

  /* ========================================
     FEATURED PROJECT
     ======================================== */
  .featured {
    position: relative;
    padding: calc(var(--g-gap) * 8) 0;
    min-height: 80vh;
    display: flex;
    align-items: center;
  }

  .featured:first-child {
    padding-top: calc(var(--g-gap) * 16);
  }

  /* Background cover */
  .featured .project-cover {
    position: absolute;
    inset: 0;
    background: linear-gradient(
      180deg,
      rgba(var(--c-berry-rgb), 0.95) 0%,
      rgba(var(--c-berry-rgb), 0.7) 50%,
      rgba(var(--c-berry-rgb), 0.95) 100%
    );
    z-index: 1;
  }

  .featured .-w {
    display: grid;
    grid-template-columns: repeat(var(--g-columns), 1fr);
    gap: var(--g-gap);
    position: relative;
    z-index: 2;
  }

  /* Project Link/Video Area */
  .featured a {
    grid-column: 1 / -1;
    position: relative;
    display: block;
    aspect-ratio: 16 / 9;
    overflow: hidden;
    border-radius: 1rem;
    background: none !important;
  }

  @media (min-width: 1024px) {
    .featured a {
      grid-column: 1 / 10;
      aspect-ratio: 21 / 9;
    }
  }

  .featured a .video-wrap {
    transition: transform 0.6s var(--f-cubic);
  }

  .featured a:hover .video-wrap {
    transform: scale(1.05);
  }

  .featured a span.-h6 {
    position: absolute;
    bottom: calc(var(--g-gap) * 4);
    left: calc(var(--g-gap) * 4);
    color: var(--c-white);
    z-index: 3;
    text-shadow: 0 2px 20px rgba(0, 0, 0, 0.5);
  }

  /* Description */
  .featured .description {
    grid-column: 1 / -1;
    color: var(--c-black);
    margin: calc(var(--g-gap) * 4) 0 0;
    max-width: 40ch;
  }

  @media (min-width: 1024px) {
    .featured .description {
      grid-column: 10 / 14;
      margin-top: 0;
      align-self: end;
    }
  }

  /* Video placeholder */
  .featured .video-placeholder {
    background: linear-gradient(
      135deg,
      var(--c-grey-dark) 0%,
      var(--c-black) 50%,
      var(--c-grey-dark) 100%
    );
    background-size: 200% 200%;
    animation: gradientMove 6s ease infinite;
  }

  @keyframes gradientMove {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
  }

  /* Alternating layouts */
  .featured:nth-child(even) .-w {
    direction: rtl;
  }

  .featured:nth-child(even) .-w > * {
    direction: ltr;
  }

  @media (min-width: 1024px) {
    .featured:nth-child(even) a {
      grid-column: 5 / 14;
    }

    .featured:nth-child(even) .description {
      grid-column: 1 / 5;
    }
  }
</style>
